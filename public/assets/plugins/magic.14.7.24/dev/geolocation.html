<!DOCTYPE html>
<html>
<head>
	<title>Geolocation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<link href="../stylesheets/defaults.css" rel="stylesheet" media="all">
	<link href="../stylesheets/docs.css" rel="stylesheet" media="all">

	<link href="../stylesheets/magic.src.css" rel="stylesheet">
	<script type="text/javascript" src="../magic.src.js" charset="UTF-8"></script>
	<script type="text/javascript">
		$m.construct({
			 lang : "en_us"
			,create_html5 : true
			,global_debug : false
			,animations : { use : true }
			,ajax : { debug : true, visual : true, timeout : 15 }
			,geo : { use : true, debug : true, visual : true }
			,send_timezone_to : false
		});
	</script>
	<script type="text/javascript" src="../wand.src.js" charset="UTF-8"></script>
	<link href="../tricks/darkroom/darkroom.src.css" rel="stylesheet">
	<script type="text/javascript" src="../tricks/darkroom/darkroom.src.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../_versions.js" charset="UTF-8"></script>

</head>
<body>
	
	<h1 class="align_center margin_bottom_5"><a href="../docs/"><img src="../images/icons/icon_magic.png" alt="Magic Icon" class="valign_middle"></a> Geolocation: Dev: Magic JavaScript</h1>
	
	<p id="mjs_quick_jump"><a href="#" data-mjf="darkroom|return_false" data-mjf_dr_type="iframe" data-mjf_dr_iframe_src="../docs/_quick_jump.html" data-mjf_dr_iframe_dim="fill" id="mjs_quick_jump_link">Quick Jump &crarr;</a></p>

	<p>
		<a href="#"
			data-mjf="geo_get|return_false"
			data-mjf_geo_update_id="position_info"
			data-mjf_geo_call_on_success="update_gmap()"
			id="get_pos_link">Get my position</a>
	</p>

	<div class="float_right margin_bottom_20" id="geo_dev_map"></div>

	<div id="position_info"><p>Geolocation data will be here.</p></div>

	<div class="clear_both"></div>


	<script type="text/javascript">
		function update_gmap()
		{
			$m.geo.simple_content_update();
			$m.id("geo_dev_map").innerHTML = '<iframe class="border_double" id="geo_dev_map" width="560" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?q=' + $m.geo.pos.coords.latitude + ',' + $m.geo.pos.coords.longitude + '&amp;z=12&amp;output=embed"></iframe>';
		}

		$m.trick.darkroom = true;
		$m.wand.geo_get = true;

		/*
			data-mjf_geo_call_on_success -- defaults to $m.geo.simple_content_update()
			data-mjf_geo_keep_watching -- true OR false; defaults to false
			data-mjf_geo_max_age -- seconds until cached location is invalid; defaults to 300
			data-mjf_geo_timeout -- seconds until timeout; defaults to 15
			data-mjf_geo_update_id -- 
			
		*/

	</script>
	
	<p class="align_center">&laquo; <a href="../docs/">Back to the main documentation</a></p>	

</body>
</html>